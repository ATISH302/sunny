//DashboardController

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUNåº— | ãƒˆãƒƒãƒ—</title>

    <!-- â˜…å…±é€šCSS -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- ===== å›ºå®šãƒ˜ãƒƒãƒ€ãƒ¼ ===== -->
<header class="site-header">
    <div class="header-inner">
        <!-- å·¦ï¼šãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ -->
        <button class="hamburger" type="button" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼" onclick="toggleMenu()">
            â˜°
        </button>

        <!-- ä¸­å¤®ï¼šåº—å -->
        <div class="brand">
            <div class="brand-title">SUNåº— ãƒãƒƒãƒˆäºˆç´„ãƒ»é€šè²©ã‚µã‚¤ãƒˆ</div>
            <div class="brand-sub" th:inline="text">
                ã‚ˆã†ã“ãã€<span th:text="${loginUserName}">ãƒ¦ãƒ¼ã‚¶ãƒ¼</span> ã•ã‚“
            </div>
        </div>

        <!-- å³ï¼šãƒ­ã‚°ã‚¢ã‚¦ãƒˆ -->
        <form class="logout-form" th:action="@{/logout}" method="post">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
            <button class="btn btn-primary" type="submit">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
        </form>
    </div>
</header>

<!-- ===== å³(ã¾ãŸã¯å·¦)ã‹ã‚‰å‡ºã‚‹ãƒ¡ãƒ‹ãƒ¥ãƒ¼ ===== -->
<nav id="drawer" class="drawer" aria-hidden="true">
    <div class="drawer-header">
        <div class="drawer-title">ãƒã‚¤ãƒšãƒ¼ã‚¸</div>
        <button class="drawer-close" type="button" aria-label="é–‰ã˜ã‚‹" onclick="toggleMenu()">âœ•</button>
    </div>

    <ul class="drawer-list">
        <li><a th:href="@{/mypage/orders}">ğŸ§¾ æ³¨æ–‡å±¥æ­´</a></li>
        <li><a th:href="@{/mypage/favorites}">ğŸ’– ãŠæ°—ã«å…¥ã‚Š</a></li>

        <!-- ã‚¹ã‚¿ãƒƒãƒ• or ç®¡ç†è€…ã«è¡¨ç¤º -->
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
		<a th:href="@{/staff/items}">ğŸ“¦ ã‚¹ã‚¿ãƒƒãƒ•ï¼šå•†å“ç®¡ç†</a>
		</li>
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
            <a th:href="@{/staff/orders}">ğŸ›  ã‚¹ã‚¿ãƒƒãƒ•ï¼šæ³¨æ–‡ç®¡ç†</a>
        </li>
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
            <a th:href="@{/staff/items/new}" onclick="toggleMenu()">â• ã‚¹ã‚¿ãƒƒãƒ•ï¼šå•†å“ç™»éŒ²</a>
        </li>
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
            <a th:href="@{/staff/reports}">ğŸ›¡ ã‚¹ã‚¿ãƒƒãƒ•ï¼šé€šå ±ä¸€è¦§</a>
        </li>
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
            <a th:href="@{/staff/attendance}">ğŸ•’ ã‚¹ã‚¿ãƒƒãƒ•ï¼šå‹¤æ€ æ‰“åˆ»</a>
        </li>
        <li sec:authorize="hasAnyRole('STAFF','ADMIN')">
            <a th:href="@{/staff/attendance/manage}">ğŸ“‹ ã‚¹ã‚¿ãƒƒãƒ•ï¼šå‹¤æ€ ç®¡ç†ï¼ˆä¸€è¦§ï¼‰</a>
        </li>

        <!-- ç®¡ç†è€…ã ã‘ã«è¡¨ç¤º -->
        <li sec:authorize="hasRole('ADMIN')">
            <a th:href="@{/admin/users}">ğŸ‘‘ ç®¡ç†è€…ï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</a>
        </li>
    </ul>
</nav>

<!-- èƒŒæ™¯ã‚’æš—ãã™ã‚‹ã‚„ã¤ -->
<div id="backdrop" class="backdrop" onclick="toggleMenu()" aria-hidden="true"></div>

<!-- ===== ãƒ¡ã‚¤ãƒ³ ===== -->
<main class="page">
    <section class="card">
        <h1 class="page-title">å•†å“ä¸€è¦§</h1>

        <div class="table-wrap">
            <table class="table">
                <thead>
                <tr>
                    <th>ç”»åƒ</th>
                    <th>å•†å“å</th>
                    <th>èª¬æ˜</th>
                    <th>ä¾¡æ ¼</th>
                    <th>åœ¨åº«</th>
                    <th>çŠ¶æ…‹</th>
                    <th>è©³ç´°</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="item : ${items}">
                    <!-- ç”»åƒï¼ˆã‚ã‚‹æ™‚ã ã‘è¡¨ç¤ºï¼‰ -->
                    <td style="width:90px;">
                        <img th:if="${item.imageUrl != null and !#strings.isEmpty(item.imageUrl)}"
                             th:src="${item.imageUrl}"
                             th:alt="${item.name}"
                             style="width:72px; height:72px; object-fit:cover; border-radius:12px; border:1px solid #e5e7eb;">
                    </td>

                    <td th:text="${item.name}">å•†å“å</td>
                    <td th:text="${item.description}">èª¬æ˜</td>
                    <td class="num" th:text="${item.price}">0</td>
                    <td class="num" th:text="${item.stock}">0</td>
                    <td>
                        <span class="badge badge-sold" th:if="${item.status} == 'SOLD'">SOLD</span>
                        <span class="badge badge-public" th:if="${item.status} == 'PUBLIC'">è²©å£²ä¸­</span>
                    </td>
                    <td>
                        <a class="link" th:href="@{|/items/${item.id}|}">è©³ç´°</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</main>

<script>
function toggleMenu() {
    const drawer = document.getElementById("drawer");
    const backdrop = document.getElementById("backdrop");

    const isOpen = drawer.classList.contains("open");
    if (isOpen) {
        drawer.classList.remove("open");
        backdrop.classList.remove("show");
        drawer.setAttribute("aria-hidden", "true");
        backdrop.setAttribute("aria-hidden", "true");
        document.body.classList.remove("no-scroll");
    } else {
        drawer.classList.add("open");
        backdrop.classList.add("show");
        drawer.setAttribute("aria-hidden", "false");
        backdrop.setAttribute("aria-hidden", "false");
        document.body.classList.add("no-scroll");
    }
}
</script>

</body>
</html>
